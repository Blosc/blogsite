<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1350" height="900" viewBox="0 0 1350 900">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#333" />
    </marker>
  </defs>
<text x="675.0" y="50" font-family="Helvetica, Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#111">New path: compute per block (miniexpr)</text>
<rect x="80" y="195.0" width="140" height="60" rx="10" ry="10" fill="#d6e9ff" stroke="#333" stroke-width="2" />
<text x="150.0" y="230.0" font-family="Helvetica, Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#111">Chunk operand A</text>
<rect x="240" y="205.0" width="90" height="40" rx="10" ry="10" fill="#e7f2ff" stroke="#333" stroke-width="2" />
<text x="285.0" y="230.0" font-family="Helvetica, Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#111">Block A</text>
<line x1="220" y1="225.0" x2="240" y2="225.0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"  />
<line x1="330" y1="225.0" x2="360" y2="365.0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"  />
<rect x="80" y="355.0" width="140" height="60" rx="10" ry="10" fill="#d6e9ff" stroke="#333" stroke-width="2" />
<text x="150.0" y="390.0" font-family="Helvetica, Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#111">Chunk operand B</text>
<rect x="240" y="365.0" width="90" height="40" rx="10" ry="10" fill="#e7f2ff" stroke="#333" stroke-width="2" />
<text x="285.0" y="390.0" font-family="Helvetica, Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#111">Block B</text>
<line x1="220" y1="385.0" x2="240" y2="385.0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"  />
<line x1="330" y1="385.0" x2="360" y2="365.0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"  />
<rect x="80" y="515.0" width="140" height="60" rx="10" ry="10" fill="#d6e9ff" stroke="#333" stroke-width="2" />
<text x="150.0" y="550.0" font-family="Helvetica, Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#111">Chunk operand C</text>
<rect x="240" y="525.0" width="90" height="40" rx="10" ry="10" fill="#e7f2ff" stroke="#333" stroke-width="2" />
<text x="285.0" y="550.0" font-family="Helvetica, Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#111">Block C</text>
<line x1="220" y1="545.0" x2="240" y2="545.0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"  />
<line x1="330" y1="545.0" x2="360" y2="365.0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"  />
<rect x="360" y="320" width="220" height="90" rx="10" ry="10" fill="#f0f0f0" stroke="#333" stroke-width="2" />
<text x="470.0" y="350" font-family="Helvetica, Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#111"><tspan x="470.0" dy="0">Block scheduler</tspan><tspan x="470.0" dy="19.2">/ queue</tspan></text>
<rect x="660" y="220" width="260" height="70" rx="10" ry="10" fill="#ffe3c4" stroke="#333" stroke-width="2" />
<text x="790.0" y="248" font-family="Helvetica, Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#111"><tspan x="790.0" dy="0">Worker 1</tspan><tspan x="790.0" dy="14.399999999999999">decompress -> compute -> recompress</tspan></text>
<line x1="580" y1="365.0" x2="660" y2="255.0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"  />
<rect x="660" y="320" width="260" height="70" rx="10" ry="10" fill="#ffe3c4" stroke="#333" stroke-width="2" />
<text x="790.0" y="348" font-family="Helvetica, Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#111"><tspan x="790.0" dy="0">Worker 2</tspan><tspan x="790.0" dy="14.399999999999999">decompress -> compute -> recompress</tspan></text>
<line x1="580" y1="365.0" x2="660" y2="355.0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"  />
<rect x="660" y="420" width="260" height="70" rx="10" ry="10" fill="#ffe3c4" stroke="#333" stroke-width="2" />
<text x="790.0" y="448" font-family="Helvetica, Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#111"><tspan x="790.0" dy="0">Worker 3</tspan><tspan x="790.0" dy="14.399999999999999">decompress -> compute -> recompress</tspan></text>
<line x1="580" y1="365.0" x2="660" y2="455.0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"  />
<rect x="1000" y="320" width="220" height="90" rx="10" ry="10" fill="#d9f2d9" stroke="#333" stroke-width="2" />
<text x="1110.0" y="350" font-family="Helvetica, Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#111"><tspan x="1110.0" dy="0">Assemble</tspan><tspan x="1110.0" dy="19.2">output chunk</tspan></text>
<line x1="920" y1="255.0" x2="1000" y2="365.0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"  />
<line x1="920" y1="355.0" x2="1000" y2="365.0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"  />
<line x1="920" y1="455.0" x2="1000" y2="365.0" stroke="#333" stroke-width="2" marker-end="url(#arrow)"  />
<text x="790.0" y="520" font-family="Helvetica, Arial, sans-serif" font-size="14" font-weight="normal" text-anchor="middle" fill="#111"><tspan x="790.0" dy="0">Block-sized working set</tspan><tspan x="790.0" dy="16.8">fits in L1/L2</tspan></text>
<line x1="790.0" y1="500" x2="790.0" y2="490" stroke="#333" stroke-width="2" marker-end="url(#arrow)" stroke-dasharray="6,4" />
<text x="470.0" y="580" font-family="Helvetica, Arial, sans-serif" font-size="14" font-weight="normal" text-anchor="middle" fill="#111"><tspan x="470.0" dy="0">Parallel blocks</tspan><tspan x="470.0" dy="16.8">-> better locality</tspan></text>
<line x1="470.0" y1="560" x2="470.0" y2="410" stroke="#333" stroke-width="2" marker-end="url(#arrow)" stroke-dasharray="6,4" />
</svg>
